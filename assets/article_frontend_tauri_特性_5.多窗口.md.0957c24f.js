import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.ab7e7ee0.js";const F=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"一、创建一个窗口","slug":"一、创建一个窗口","link":"#一、创建一个窗口","children":[{"level":3,"title":"1. 静态窗口static window","slug":"_1-静态窗口static-window","link":"#_1-静态窗口static-window","children":[]},{"level":3,"title":"2. 运行时窗口","slug":"_2-运行时窗口","link":"#_2-运行时窗口","children":[{"level":4,"title":"（1）使用Rust","slug":"_1-使用rust","link":"#_1-使用rust","children":[]},{"level":4,"title":"（2）使用TauriApi","slug":"_2-使用tauriapi","link":"#_2-使用tauriapi","children":[]}]}]},{"level":2,"title":"二、运行时获取窗口实例","slug":"二、运行时获取窗口实例","link":"#二、运行时获取窗口实例","children":[{"level":3,"title":"1. 前端","slug":"_1-前端","link":"#_1-前端","children":[]},{"level":3,"title":"2. 后端","slug":"_2-后端","link":"#_2-后端","children":[]}]},{"level":2,"title":"三、窗口间通信","slug":"三、窗口间通信","link":"#三、窗口间通信","children":[]}],"relativePath":"article/frontend/tauri/特性/5.多窗口.md","filePath":"article/frontend/tauri/特性/5.多窗口.md","lastUpdated":1707839101000}'),p={name:"article/frontend/tauri/特性/5.多窗口.md"},o=l(`<blockquote><p>如何在单个应用内管理多个窗口</p></blockquote><h2 id="一、创建一个窗口" tabindex="-1">一、创建一个窗口 <a class="header-anchor" href="#一、创建一个窗口" aria-label="Permalink to &quot;一、创建一个窗口&quot;">​</a></h2><p>创建窗口有两种方式</p><ul><li>通过<code>tauri</code>配置文件创建静态的窗口</li><li>运行过程中创建</li></ul><h3 id="_1-静态窗口static-window" tabindex="-1">1. 静态窗口<code>static window</code> <a class="header-anchor" href="#_1-静态窗口static-window" aria-label="Permalink to &quot;1. 静态窗口\`static window\`&quot;">​</a></h3><p>静态多窗口的配置在<code>tauri.config.json</code>进行，配置的是<code>tauri.windows</code>数组，如下：</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;tauri&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;windows&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;label&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;external&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;title&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Tauri Docs&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;url&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;https://tauri.app&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;label&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;local&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;title&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Tauri&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;url&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;index.html&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ]</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;tauri&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;windows&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;label&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;external&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;title&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Tauri Docs&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;url&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;https://tauri.app&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;label&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;local&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;title&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Tauri&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;url&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;index.html&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    ]</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>注意到，<code>label</code>属性值必须唯一，它是在运行时用来获取窗口实例的唯一标志，窗口的详细配置可以参考<a href="https://tauri.app/zh-cn/v1/api/config/#windowconfig" target="_blank" rel="noreferrer">Configuration | Tauri Apps</a></p><p>通过配置文件产生的静态窗口会在应用启动的时候全部打开</p><h3 id="_2-运行时窗口" tabindex="-1">2. 运行时窗口 <a class="header-anchor" href="#_2-运行时窗口" aria-label="Permalink to &quot;2. 运行时窗口&quot;">​</a></h3><p>运行时创建窗口可以通过<code>Rust</code>和<code>Tauri</code>两个层面来实现</p><h4 id="_1-使用rust" tabindex="-1">（1）使用<code>Rust</code> <a class="header-anchor" href="#_1-使用rust" aria-label="Permalink to &quot;（1）使用\`Rust\`&quot;">​</a></h4><p>利用的是<code>WindowBuilder</code>这个结构，要创建一个窗口，你必须拿到一个运行着的<code>App</code>或者<code>AppHandle</code></p><h5 id="_1使用app实例" tabindex="-1">①使用<code>App</code>实例 <a class="header-anchor" href="#_1使用app实例" aria-label="Permalink to &quot;①使用\`App\`实例&quot;">​</a></h5><p><code>App</code>实例可以在<code>Builder::build</code>的<code>setup</code>这个<code>hook</code>中拿到</p><div class="language-rust vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">Builder</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">default</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">.</span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">app</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> docs_window </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">WindowBuilder</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">new</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      app,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;external&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">/* the unique window label */</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">WindowUrl</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">External</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;https://tauri.app/&quot;</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">unwrap</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">    )</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> local_window </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">WindowBuilder</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">new</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      app,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;local&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">WindowUrl</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">App</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;index.html&quot;</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">into</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">    )</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">Ok</span><span style="color:#E1E4E8;">(())</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#F97583;">.</span><span style="color:#B392F0;">invoke_handler</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">generate_handler!</span><span style="color:#E1E4E8;">[])</span></span>
<span class="line"><span style="color:#F97583;">.</span><span style="color:#B392F0;">run</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">generate_context!</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#F97583;">.</span><span style="color:#B392F0;">expect</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;error while running tauri application&quot;</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">Builder</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">default</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">|</span><span style="color:#24292E;">app</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> docs_window </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">WindowBuilder</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">new</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      app,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;external&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">/* the unique window label */</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">WindowUrl</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">External</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;https://tauri.app/&quot;</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">unwrap</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">    )</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">?</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> local_window </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">WindowBuilder</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">new</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      app,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;local&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">WindowUrl</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">App</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;index.html&quot;</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">into</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">    )</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">?</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">Ok</span><span style="color:#24292E;">(())</span></span>
<span class="line"><span style="color:#24292E;">  })</span></span>
<span class="line"><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">invoke_handler</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">generate_handler!</span><span style="color:#24292E;">[])</span></span>
<span class="line"><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">generate_context!</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">expect</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;error while running tauri application&quot;</span><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>如上使用<code>setup hook</code>创建确保了窗口是静态窗口，并且<code>Tauri plugins</code>在此时进行了初始化，你也可以在构建<code>App</code>后创建窗口</p><div class="language-rust vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> app </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">Builder</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">default</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">.</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">generate_context!</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">.</span><span style="color:#B392F0;">expect</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;error while building tauri application&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> docs_window </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">WindowBuilder</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">new</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">app,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;external&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">/* the unique window label */</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">WindowUrl</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">External</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;https://tauri.app/&quot;</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">unwrap</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">expect</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;failed to build window&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> local_window </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">WindowBuilder</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">new</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">app,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;local&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">WindowUrl</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">App</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;index.html&quot;</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">into</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> app </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">Builder</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">default</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">generate_context!</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">expect</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;error while building tauri application&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> docs_window </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">WindowBuilder</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">new</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;">app,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;external&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">/* the unique window label */</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">WindowUrl</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">External</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;https://tauri.app/&quot;</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">unwrap</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">)</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">expect</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;failed to build window&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> local_window </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">WindowBuilder</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">new</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;">app,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;local&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">WindowUrl</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">App</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;index.html&quot;</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">into</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">)</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">?</span><span style="color:#24292E;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>这种方式在你无法转移某些值的所有权到<code>setup</code>作用域的时候会非常有用</p><h5 id="_2使用apphandle实例" tabindex="-1">②使用<code>AppHandle</code>实例 <a class="header-anchor" href="#_2使用apphandle实例" aria-label="Permalink to &quot;②使用\`AppHandle\`实例&quot;">​</a></h5><p>获取<code>AppHandle</code>实例有两种方式，一是直接使用<code>App::handle</code>方法，而是直接在<code>Tauri</code>的指令系统中注入</p><ul><li>直接使用<code>App::handle</code>方法</li></ul><div class="language-rust vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">Builder</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">default</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">.</span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">app</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> handle </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> app</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">handle</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">std</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">thread</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">spawn</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">move</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> local_window </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">WindowBuilder</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">new</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">handle,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;local&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">WindowUrl</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">App</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;index.html&quot;</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">into</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">      )</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">Ok</span><span style="color:#E1E4E8;">(())</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">Builder</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">default</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">|</span><span style="color:#24292E;">app</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> handle </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> app</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">handle</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">std</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">thread</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">spawn</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">move</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> local_window </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">WindowBuilder</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">new</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;">handle,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;local&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">WindowUrl</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">App</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;index.html&quot;</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">into</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">      )</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">?</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">Ok</span><span style="color:#24292E;">(())</span></span>
<span class="line"><span style="color:#24292E;">  })</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>指令系统注入</li></ul><div class="language-rust vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">#[tauri</span><span style="color:#F97583;">::</span><span style="color:#E1E4E8;">command]</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">fn</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">open_docs</span><span style="color:#E1E4E8;">(handle</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">AppHandle</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> docs_window </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">WindowBuilder</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">new</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">handle,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;external&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">/* the unique window label */</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">WindowUrl</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">External</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;https://tauri.app/&quot;</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">unwrap</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">  )</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">build</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">unwrap</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">#[tauri</span><span style="color:#D73A49;">::</span><span style="color:#24292E;">command]</span></span>
<span class="line"><span style="color:#D73A49;">async</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">fn</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">open_docs</span><span style="color:#24292E;">(handle</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">AppHandle</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> docs_window </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">WindowBuilder</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">new</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;">handle,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;external&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">/* the unique window label */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">WindowUrl</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">External</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;https://tauri.app/&quot;</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">unwrap</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">  )</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">unwrap</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>注意：使用指令系统注入方式来创建窗口的时候必须使用<code>async</code>异步函数，放置死锁的发生</p></blockquote><h4 id="_2-使用tauriapi" tabindex="-1">（2）使用<code>TauriApi</code> <a class="header-anchor" href="#_2-使用tauriapi" aria-label="Permalink to &quot;（2）使用\`TauriApi\`&quot;">​</a></h4><p>通过引入<code>WebviewWindow</code>可以很轻松的创建窗口，该操作在前端进行编写</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { WebviewWindow } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@tauri-apps/api/window&#39;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">webview</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">WebviewWindow</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;theUniqueLabel&#39;</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  url: </span><span style="color:#9ECBFF;">&#39;path/to/page.html&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#6A737D;">// since the webview window is created asynchronously,</span></span>
<span class="line"><span style="color:#6A737D;">// Tauri emits the \`tauri://created\` and \`tauri://error\` to notify you of the creation response</span></span>
<span class="line"><span style="color:#E1E4E8;">webview.</span><span style="color:#B392F0;">once</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;tauri://created&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// webview window successfully created</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#E1E4E8;">webview.</span><span style="color:#B392F0;">once</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;tauri://error&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// an error occurred during webview window creation</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { WebviewWindow } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@tauri-apps/api/window&#39;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">webview</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">WebviewWindow</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;theUniqueLabel&#39;</span><span style="color:#24292E;">, {</span></span>
<span class="line"><span style="color:#24292E;">  url: </span><span style="color:#032F62;">&#39;path/to/page.html&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#6A737D;">// since the webview window is created asynchronously,</span></span>
<span class="line"><span style="color:#6A737D;">// Tauri emits the \`tauri://created\` and \`tauri://error\` to notify you of the creation response</span></span>
<span class="line"><span style="color:#24292E;">webview.</span><span style="color:#6F42C1;">once</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;tauri://created&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> () {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// webview window successfully created</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#24292E;">webview.</span><span style="color:#6F42C1;">once</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;tauri://error&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// an error occurred during webview window creation</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="二、运行时获取窗口实例" tabindex="-1">二、运行时获取窗口实例 <a class="header-anchor" href="#二、运行时获取窗口实例" aria-label="Permalink to &quot;二、运行时获取窗口实例&quot;">​</a></h2><p>前后端都可以通过窗口的唯一<code>label</code>获取到窗口实例</p><h3 id="_1-前端" tabindex="-1">1. 前端 <a class="header-anchor" href="#_1-前端" aria-label="Permalink to &quot;1. 前端&quot;">​</a></h3><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { WebviewWindow } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@tauri-apps/api/window&#39;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">mainWindow</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> WebviewWindow.</span><span style="color:#B392F0;">getByLabel</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;main&#39;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { WebviewWindow } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@tauri-apps/api/window&#39;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">mainWindow</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> WebviewWindow.</span><span style="color:#6F42C1;">getByLabel</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;main&#39;</span><span style="color:#24292E;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-后端" tabindex="-1">2. 后端 <a class="header-anchor" href="#_2-后端" aria-label="Permalink to &quot;2. 后端&quot;">​</a></h3><div class="language-rust vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">rust</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">use</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">Manager</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#B392F0;">tauri</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">Builder</span><span style="color:#F97583;">::</span><span style="color:#B392F0;">default</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">.</span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">app</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> main_window </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> app</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">get_window</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;main&quot;</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">.</span><span style="color:#B392F0;">unwrap</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">Ok</span><span style="color:#E1E4E8;">(())</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">use</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">Manager</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6F42C1;">tauri</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">Builder</span><span style="color:#D73A49;">::</span><span style="color:#6F42C1;">default</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">|</span><span style="color:#24292E;">app</span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> main_window </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> app</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">get_window</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;main&quot;</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">.</span><span style="color:#6F42C1;">unwrap</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">Ok</span><span style="color:#24292E;">(())</span></span>
<span class="line"><span style="color:#24292E;">  })</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>注意到后端使用<code>get_window</code>必须引入<code>tauri::Manager</code></p><h2 id="三、窗口间通信" tabindex="-1">三、窗口间通信 <a class="header-anchor" href="#三、窗口间通信" aria-label="Permalink to &quot;三、窗口间通信&quot;">​</a></h2><p>使用事件系统进行通信</p>`,38),e=[o];function r(t,c,y,E,i,u){return n(),a("div",null,e)}const b=s(p,[["render",r]]);export{F as __pageData,b as default};
